(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"./src/js/main.js":[function(require,module,exports){
'use strict';

var w = window.innerWidth * window.devicePixelRatio,
    h = window.innerHeight * window.devicePixelRatio;

//var game = new Phaser.Game((h > w) ? h : w, (h > w) ? w : h, Phaser.AUTO, 'naapurinkauhu-game');
var game = new Phaser.Game(1024, 768, Phaser.AUTO, 'naapurinkauhu-game');

window.Utils = require('./utils');
window.playerState = {
    currentLevel: 'Game'
}

game.state.add('Boot', require('./states/boot'));
//game.state.add('Splash', require('./states/splash'));
game.state.add('Preloader', require('./states/preloader'));
game.state.add('Menu', require('./states/menu'));
game.state.add('GameOver', require('./states/gameover'));
game.state.add('Game', require('./states/game'));

game.state.start('Boot');

},{"./states/boot":"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\states\\boot.js","./states/game":"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\states\\game.js","./states/gameover":"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\states\\gameover.js","./states/menu":"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\states\\menu.js","./states/preloader":"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\states\\preloader.js","./utils":"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\utils.js"}],"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\entities\\player.js":[function(require,module,exports){
var Player = function (game, x, y) {
    Phaser.Sprite.call(this, game, x, y, 'testsprite');
    game.add.existing(this);
}

Player.prototype = Object.create(Phaser.Sprite.prototype);
Player.prototype.constructor = Player;

/**
 * Automatically called by World.update
 */
Player.prototype.update = function() {
};

module.exports = Player;

},{}],"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\states\\boot.js":[function(require,module,exports){
var Boot = function () {};

module.exports = Boot;

Boot.prototype = {

  preload: function () {
    this.load.image('preloader', 'assets/preloader.gif');
  },

  create: function () {
    //this.game.input.maxPointers = 1;

    this.input.maxPointers = 1;
    this.stage.disableVisibilityChange = true;

    if (this.game.device.desktop)
    {
        this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
        this.scale.setMinMax(480, 260, 1024, 768);
        this.scale.pageAlignHorizontally = true;
        this.scale.pageAlignVertically = true;
        this.scale.setScreenSize(true);
        this.scale.refresh();
    }
    else
    {
        this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
        this.scale.setMinMax(480, 260, 1024, 768);
        this.scale.pageAlignHorizontally = true;
        this.scale.pageAlignVertically = true;
        this.scale.forceOrientation(true, false);
        this.scale.setResizeCallback(this.gameResized, this);
        this.scale.enterIncorrectOrientation.add(this.enterIncorrectOrientation, this);
        this.scale.leaveIncorrectOrientation.add(this.leaveIncorrectOrientation, this);
        this.scale.setScreenSize(true);
        this.scale.refresh();
    }

    this.game.state.start('Preloader');
  },

  gameResized: function (width, height) {

        //  This could be handy if you need to do any extra processing if the game resizes.
        //  A resize could happen if for example swapping orientation on a device or resizing the browser window.
        //  Note that this callback is only really useful if you use a ScaleMode of RESIZE and place it inside your main game state.

    },

    enterIncorrectOrientation: function () {

        BasicGame.orientated = false;

        document.getElementById('orientation').style.display = 'block';

    },

    leaveIncorrectOrientation: function () {

        BasicGame.orientated = true;

        document.getElementById('orientation').style.display = 'none';

    }
};

},{}],"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\states\\game.js":[function(require,module,exports){
var Player = require('../entities/player');

var Game = function () {
  this.testentity = null;
};

module.exports = Game;

Game.prototype = {

  create: function () {
    //this.enemys = this.game.add.group();

    this.game.input.addPointer();

    this.enemys = [];

    this.skyprite = this.game.add.tileSprite(0, 0, this.game.width, this.game.height, 'sky');
    this.groundsprite = this.game.add.tileSprite(0, this.game.height / 2 + 50, this.game.width, this.game.height / 2, 'ground');
    this.crosshair = this.game.add.sprite(this.game.width / 2 - 202, this.game.height - 213, 'konekivaari');

    this.cursors = this.game.input.keyboard.createCursorKeys();
    this.game.time.events.loop(Phaser.Timer.HALF, this.createEnemy, this);
    this.crosshair = this.game.add.sprite(100, this.game.height/2 + 50, 'crosshair');
    this.crosshair.anchor.setTo(0.5, 0.5);
    this.game.physics.enable(this.crosshair, Phaser.Physics.ARCADE);
    this.nextFire = 0;
    this.fireRate = 50;
    this.enemyCreated = 0;
    this.enemyKilled = 0;
    this.score = 0;

    this.fireButton = this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);
    this.fx = this.game.add.audio('sfx');

    this.fx.addMarker('alien death', 1, 1.0);
    this.fx.addMarker('boss hit', 3, 0.5);
    this.fx.addMarker('escape', 4, 3.2);
    this.fx.addMarker('meow', 8, 0.5);
    this.fx.addMarker('numkey', 9, 0.1);
    this.fx.addMarker('ping', 10, 1.0);
    this.fx.addMarker('death', 12, 4.2);
    this.fx.addMarker('shot', 17, 1.0);
    this.fx.addMarker('squit', 19, 0.3);

    // Bullets
    this.bullets = 500;
    this.bulletsLeftText = this.add.bitmapText(0, 20, 'minecraftia', this.bullets.toString() );
    //this.bulletsLeftText.align = 'center';
    this.bulletsLeftText.x = this.game.width - this.bulletsLeftText.textWidth - 20;
  },

  update: function () {

    if (this.fireButton.isDown || this.game.input.activePointer.isDown )
      {
        //console.log('FIRE!');

        // Moving?
	      this.crosshair.x = this.game.input.mousePointer.x;
	      this.crosshair.y = this.game.input.mousePointer.y;

	      


        //console.log('this.game.time.now ' + this.game.time.now);
        //console.log('this.nextFire ' + this.nextFire);

        if (this.game.time.now > this.nextFire )
        {
          this.nextFire = this.game.time.now + this.fireRate;
          this.fx.play('shot');
          this.bullets -= 1;

          if(this.bullets <= 0) {
            this.bulletsLeftText.setText(0);
            this.endGame();
          } else {
            this.bulletsLeftText.setText(this.bullets.toString());
          }

          for (var i = this.enemys.length - 1; i >= 0; i--) 
          {
            //var enemy = this.enemys.getAt(i);
            var enemy = this.enemys[i];
            if (this.checkOverlap(this.crosshair, enemy))
            {
              enemy.kill();
              this.score++;
            }
          }
        }
      }

      

      // Scale enemy
      for (var j = this.enemys.length - 1; j >= 0; j--) 
      {
        var tenemy = this.enemys[j];
        tenemy.y += 0.05;
        tenemy.x -= 0.01;
        tenemy.scale.x += 0.001;
        tenemy.scale.y += 0.001;
      }

      //
      //this.crosshair.scale.x += 0.1;
      //this.crosshair.scale.y += 0.1;
  },

  collisionHandler: function (obj1, obj2) {
    //this.game.stage.backgroundColor = '#FF6600';
    //console.log('collision!' + obj2 + obj1);

  },

  endGame: function () {
    this.bulletsLeftText.setText('0');
    this.game.state.start('GameOver');
  },

  checkOverlap: function (spriteA, spriteB) {
    var boundsA = spriteA.getBounds();
    var boundsB = spriteB.getBounds();

    //console.log(boundsA);
    //console.log(boundsB);
    //boundsA.width = 20;
    //boundsA.height = 20;

    return Phaser.Rectangle.intersects(boundsA, boundsB);
  },

  createEnemy: function () {
    var x = this.game.width - 100
      , y = this.game.height / 2;

    this.enemyCreated += 1;

    var random = this.game.rnd.realInRange(0,x);
    for (var j = this.enemys.length - 1; j >= 0; j--) 
    {
      var tenemy = this.enemys[j];
      if(random > tenemy.x && random < (tenemy.x + 100)) {
        random = this.game.rnd.realInRange(0,x);
      }
    }

    var enemy = this.game.add.sprite(random, y, 'enemy');
    
    //enemy.scale.setTo(5,5);
    //console.log("enemy width: " + enemy.width);
    //console.log("window width: " + this.game.width);

    /*if(enemy.x >= this.game.x - enemy.width) {

    }*/

    enemy.enableBody = true;
    enemy.physicsBodyType = Phaser.Physics.ARCADE;
    
    //this.enemys.create(enemy);
    this.enemys.push(enemy);

    this.game.world.bringToTop(this.crosshair);
  },

  playerInputDown: function (event) {
    //console.log(event);
    event.kill();

  },

  onInputDown: function () {
    this.game.state.start('Menu');
  }
};

},{"../entities/player":"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\entities\\player.js"}],"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\states\\gameover.js":[function(require,module,exports){
var Gameover = function () {};

module.exports = Gameover;

Gameover.prototype = {

  create: function () {
    var x = this.game.width / 2
      , y = this.game.height / 2;

    this.titleTxt = this.add.bitmapText(x, y, 'minecraftia', 'Killed: ' );
    this.titleTxt.align = 'center';
    this.titleTxt.x = this.game.width / 2 - this.titleTxt.textWidth / 2;

    y = y + this.titleTxt.height + 5;
    this.startTxt = this.add.bitmapText(x, y, 'minecraftia', 'GAME OVER');
    this.startTxt.align = 'center';
    this.startTxt.x = this.game.width / 2 - this.startTxt.textWidth / 2;
    
    this.input.onDown.add(this.onDown, this);
  },

  update: function () {

  },

  onDown: function () {
    this.game.state.start('Menu');
    //this.game.state.start('Gameover');
  }
};

},{}],"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\states\\menu.js":[function(require,module,exports){
var Menu = function () {
  this.text = null;
};

module.exports = Menu;

Menu.prototype = {

  create: function () {
    var x = this.game.width / 2
      , y = this.game.height / 2;

    this.titleTxt = this.add.bitmapText(x, y, 'minecraftia', 'Naapurinkauhu' );
    this.titleTxt.align = 'center';
    this.titleTxt.x = this.game.width / 2 - this.titleTxt.textWidth / 2;

    this.startTxt = this.add.bitmapText(x, y + this.titleTxt.height + 5, 'minecraftia', 'Press screen to start');
    this.startTxt.align = 'center';
    this.startTxt.x = this.game.width / 2 - this.startTxt.textWidth / 2;

    this.input.onDown.add(this.onDown, this);
  },

  update: function () {

  },

  onDown: function () {
    this.game.state.start('Game');
    //this.game.scale.startFullScreen();
  }
};

},{}],"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\states\\preloader.js":[function(require,module,exports){
var Preloader = function (game) {
  this.asset = null;
  this.ready = false;
};

module.exports = Preloader;

Preloader.prototype = {

  preload: function () {
    this.asset = this.add.sprite(320, 240, 'preloader');
      this.asset.anchor.setTo(0.5, 0.5);

      this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
      this.load.setPreloadSprite(this.asset);
      this.load.image('target', 'assets/target.png');
      this.load.image('player', 'assets/player.png');
      this.load.image('bunny', 'assets/bunny.png');
      this.load.image('enemy', 'assets/enemy.png');
      this.load.image('konekivaari', 'assets/tykki.png');
      this.load.image('sky', 'assets/sky.jpg');
      this.load.image('ground', 'assets/ground.jpg');
      this.load.image('crosshair', 'assets/target.png');
      this.load.bitmapFont('minecraftia', 'assets/minecraftia.png', 'assets/minecraftia.xml');
      this.load.audio('sfx', 'assets/audio/SoundEffects/fx_mixdown.ogg');
  },

  create: function () {
    this.asset.cropEnabled = false;
  },

  update: function () {
    if (!!this.ready) {
        this.game.state.start('Menu');
      }
  },

  onLoadComplete: function () {
    this.ready = true;
  }
};

},{}],"D:\\Projects\\GIT\\lsg-naapurin-kauhu-up\\src\\js\\utils.js":[function(require,module,exports){
var Utils = {
    containsObject: function(obj, list) {
        var i;
        for (i = 0; i < list.length; i++) {
            if (list[i] === obj) {
                return true;
            }
        }

        return false;
    }
};

module.exports = Utils;
},{}]},{},["./src/js/main.js"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwic3JjXFxqc1xcbWFpbi5qcyIsInNyY1xcanNcXGVudGl0aWVzXFxwbGF5ZXIuanMiLCJzcmNcXGpzXFxzdGF0ZXNcXGJvb3QuanMiLCJzcmNcXGpzXFxzdGF0ZXNcXGdhbWUuanMiLCJzcmNcXGpzXFxzdGF0ZXNcXGdhbWVvdmVyLmpzIiwic3JjXFxqc1xcc3RhdGVzXFxtZW51LmpzIiwic3JjXFxqc1xcc3RhdGVzXFxwcmVsb2FkZXIuanMiLCJzcmNcXGpzXFx1dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdyA9IHdpbmRvdy5pbm5lcldpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sXG4gICAgaCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuXG4vL3ZhciBnYW1lID0gbmV3IFBoYXNlci5HYW1lKChoID4gdykgPyBoIDogdywgKGggPiB3KSA/IHcgOiBoLCBQaGFzZXIuQVVUTywgJ25hYXB1cmlua2F1aHUtZ2FtZScpO1xudmFyIGdhbWUgPSBuZXcgUGhhc2VyLkdhbWUoMTAyNCwgNzY4LCBQaGFzZXIuQVVUTywgJ25hYXB1cmlua2F1aHUtZ2FtZScpO1xuXG53aW5kb3cuVXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG53aW5kb3cucGxheWVyU3RhdGUgPSB7XG4gICAgY3VycmVudExldmVsOiAnR2FtZSdcbn1cblxuZ2FtZS5zdGF0ZS5hZGQoJ0Jvb3QnLCByZXF1aXJlKCcuL3N0YXRlcy9ib290JykpO1xuLy9nYW1lLnN0YXRlLmFkZCgnU3BsYXNoJywgcmVxdWlyZSgnLi9zdGF0ZXMvc3BsYXNoJykpO1xuZ2FtZS5zdGF0ZS5hZGQoJ1ByZWxvYWRlcicsIHJlcXVpcmUoJy4vc3RhdGVzL3ByZWxvYWRlcicpKTtcbmdhbWUuc3RhdGUuYWRkKCdNZW51JywgcmVxdWlyZSgnLi9zdGF0ZXMvbWVudScpKTtcbmdhbWUuc3RhdGUuYWRkKCdHYW1lT3ZlcicsIHJlcXVpcmUoJy4vc3RhdGVzL2dhbWVvdmVyJykpO1xuZ2FtZS5zdGF0ZS5hZGQoJ0dhbWUnLCByZXF1aXJlKCcuL3N0YXRlcy9nYW1lJykpO1xuXG5nYW1lLnN0YXRlLnN0YXJ0KCdCb290Jyk7XG4iLCJ2YXIgUGxheWVyID0gZnVuY3Rpb24gKGdhbWUsIHgsIHkpIHtcbiAgICBQaGFzZXIuU3ByaXRlLmNhbGwodGhpcywgZ2FtZSwgeCwgeSwgJ3Rlc3RzcHJpdGUnKTtcbiAgICBnYW1lLmFkZC5leGlzdGluZyh0aGlzKTtcbn1cblxuUGxheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGhhc2VyLlNwcml0ZS5wcm90b3R5cGUpO1xuUGxheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBsYXllcjtcblxuLyoqXG4gKiBBdXRvbWF0aWNhbGx5IGNhbGxlZCBieSBXb3JsZC51cGRhdGVcbiAqL1xuUGxheWVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUGxheWVyO1xuIiwidmFyIEJvb3QgPSBmdW5jdGlvbiAoKSB7fTtcblxubW9kdWxlLmV4cG9ydHMgPSBCb290O1xuXG5Cb290LnByb3RvdHlwZSA9IHtcblxuICBwcmVsb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5sb2FkLmltYWdlKCdwcmVsb2FkZXInLCAnYXNzZXRzL3ByZWxvYWRlci5naWYnKTtcbiAgfSxcblxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAvL3RoaXMuZ2FtZS5pbnB1dC5tYXhQb2ludGVycyA9IDE7XG5cbiAgICB0aGlzLmlucHV0Lm1heFBvaW50ZXJzID0gMTtcbiAgICB0aGlzLnN0YWdlLmRpc2FibGVWaXNpYmlsaXR5Q2hhbmdlID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmdhbWUuZGV2aWNlLmRlc2t0b3ApXG4gICAge1xuICAgICAgICB0aGlzLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuU0hPV19BTEw7XG4gICAgICAgIHRoaXMuc2NhbGUuc2V0TWluTWF4KDQ4MCwgMjYwLCAxMDI0LCA3NjgpO1xuICAgICAgICB0aGlzLnNjYWxlLnBhZ2VBbGlnbkhvcml6b250YWxseSA9IHRydWU7XG4gICAgICAgIHRoaXMuc2NhbGUucGFnZUFsaWduVmVydGljYWxseSA9IHRydWU7XG4gICAgICAgIHRoaXMuc2NhbGUuc2V0U2NyZWVuU2l6ZSh0cnVlKTtcbiAgICAgICAgdGhpcy5zY2FsZS5yZWZyZXNoKCk7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgIHRoaXMuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcbiAgICAgICAgdGhpcy5zY2FsZS5zZXRNaW5NYXgoNDgwLCAyNjAsIDEwMjQsIDc2OCk7XG4gICAgICAgIHRoaXMuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zY2FsZS5wYWdlQWxpZ25WZXJ0aWNhbGx5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zY2FsZS5mb3JjZU9yaWVudGF0aW9uKHRydWUsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5zY2FsZS5zZXRSZXNpemVDYWxsYmFjayh0aGlzLmdhbWVSZXNpemVkLCB0aGlzKTtcbiAgICAgICAgdGhpcy5zY2FsZS5lbnRlckluY29ycmVjdE9yaWVudGF0aW9uLmFkZCh0aGlzLmVudGVySW5jb3JyZWN0T3JpZW50YXRpb24sIHRoaXMpO1xuICAgICAgICB0aGlzLnNjYWxlLmxlYXZlSW5jb3JyZWN0T3JpZW50YXRpb24uYWRkKHRoaXMubGVhdmVJbmNvcnJlY3RPcmllbnRhdGlvbiwgdGhpcyk7XG4gICAgICAgIHRoaXMuc2NhbGUuc2V0U2NyZWVuU2l6ZSh0cnVlKTtcbiAgICAgICAgdGhpcy5zY2FsZS5yZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdQcmVsb2FkZXInKTtcbiAgfSxcblxuICBnYW1lUmVzaXplZDogZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHtcblxuICAgICAgICAvLyAgVGhpcyBjb3VsZCBiZSBoYW5keSBpZiB5b3UgbmVlZCB0byBkbyBhbnkgZXh0cmEgcHJvY2Vzc2luZyBpZiB0aGUgZ2FtZSByZXNpemVzLlxuICAgICAgICAvLyAgQSByZXNpemUgY291bGQgaGFwcGVuIGlmIGZvciBleGFtcGxlIHN3YXBwaW5nIG9yaWVudGF0aW9uIG9uIGEgZGV2aWNlIG9yIHJlc2l6aW5nIHRoZSBicm93c2VyIHdpbmRvdy5cbiAgICAgICAgLy8gIE5vdGUgdGhhdCB0aGlzIGNhbGxiYWNrIGlzIG9ubHkgcmVhbGx5IHVzZWZ1bCBpZiB5b3UgdXNlIGEgU2NhbGVNb2RlIG9mIFJFU0laRSBhbmQgcGxhY2UgaXQgaW5zaWRlIHlvdXIgbWFpbiBnYW1lIHN0YXRlLlxuXG4gICAgfSxcblxuICAgIGVudGVySW5jb3JyZWN0T3JpZW50YXRpb246IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBCYXNpY0dhbWUub3JpZW50YXRlZCA9IGZhbHNlO1xuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcmllbnRhdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgfSxcblxuICAgIGxlYXZlSW5jb3JyZWN0T3JpZW50YXRpb246IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBCYXNpY0dhbWUub3JpZW50YXRlZCA9IHRydWU7XG5cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29yaWVudGF0aW9uJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIH1cbn07XG4iLCJ2YXIgUGxheWVyID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvcGxheWVyJyk7XG5cbnZhciBHYW1lID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnRlc3RlbnRpdHkgPSBudWxsO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBHYW1lO1xuXG5HYW1lLnByb3RvdHlwZSA9IHtcblxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAvL3RoaXMuZW5lbXlzID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xuXG4gICAgdGhpcy5nYW1lLmlucHV0LmFkZFBvaW50ZXIoKTtcblxuICAgIHRoaXMuZW5lbXlzID0gW107XG5cbiAgICB0aGlzLnNreXByaXRlID0gdGhpcy5nYW1lLmFkZC50aWxlU3ByaXRlKDAsIDAsIHRoaXMuZ2FtZS53aWR0aCwgdGhpcy5nYW1lLmhlaWdodCwgJ3NreScpO1xuICAgIHRoaXMuZ3JvdW5kc3ByaXRlID0gdGhpcy5nYW1lLmFkZC50aWxlU3ByaXRlKDAsIHRoaXMuZ2FtZS5oZWlnaHQgLyAyICsgNTAsIHRoaXMuZ2FtZS53aWR0aCwgdGhpcy5nYW1lLmhlaWdodCAvIDIsICdncm91bmQnKTtcbiAgICB0aGlzLmNyb3NzaGFpciA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuZ2FtZS53aWR0aCAvIDIgLSAyMDIsIHRoaXMuZ2FtZS5oZWlnaHQgLSAyMTMsICdrb25la2l2YWFyaScpO1xuXG4gICAgdGhpcy5jdXJzb3JzID0gdGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLmNyZWF0ZUN1cnNvcktleXMoKTtcbiAgICB0aGlzLmdhbWUudGltZS5ldmVudHMubG9vcChQaGFzZXIuVGltZXIuSEFMRiwgdGhpcy5jcmVhdGVFbmVteSwgdGhpcyk7XG4gICAgdGhpcy5jcm9zc2hhaXIgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSgxMDAsIHRoaXMuZ2FtZS5oZWlnaHQvMiArIDUwLCAnY3Jvc3NoYWlyJyk7XG4gICAgdGhpcy5jcm9zc2hhaXIuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgICB0aGlzLmdhbWUucGh5c2ljcy5lbmFibGUodGhpcy5jcm9zc2hhaXIsIFBoYXNlci5QaHlzaWNzLkFSQ0FERSk7XG4gICAgdGhpcy5uZXh0RmlyZSA9IDA7XG4gICAgdGhpcy5maXJlUmF0ZSA9IDUwO1xuICAgIHRoaXMuZW5lbXlDcmVhdGVkID0gMDtcbiAgICB0aGlzLmVuZW15S2lsbGVkID0gMDtcbiAgICB0aGlzLnNjb3JlID0gMDtcblxuICAgIHRoaXMuZmlyZUJ1dHRvbiA9IHRoaXMuZ2FtZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoUGhhc2VyLktleWJvYXJkLlNQQUNFQkFSKTtcbiAgICB0aGlzLmZ4ID0gdGhpcy5nYW1lLmFkZC5hdWRpbygnc2Z4Jyk7XG5cbiAgICB0aGlzLmZ4LmFkZE1hcmtlcignYWxpZW4gZGVhdGgnLCAxLCAxLjApO1xuICAgIHRoaXMuZnguYWRkTWFya2VyKCdib3NzIGhpdCcsIDMsIDAuNSk7XG4gICAgdGhpcy5meC5hZGRNYXJrZXIoJ2VzY2FwZScsIDQsIDMuMik7XG4gICAgdGhpcy5meC5hZGRNYXJrZXIoJ21lb3cnLCA4LCAwLjUpO1xuICAgIHRoaXMuZnguYWRkTWFya2VyKCdudW1rZXknLCA5LCAwLjEpO1xuICAgIHRoaXMuZnguYWRkTWFya2VyKCdwaW5nJywgMTAsIDEuMCk7XG4gICAgdGhpcy5meC5hZGRNYXJrZXIoJ2RlYXRoJywgMTIsIDQuMik7XG4gICAgdGhpcy5meC5hZGRNYXJrZXIoJ3Nob3QnLCAxNywgMS4wKTtcbiAgICB0aGlzLmZ4LmFkZE1hcmtlcignc3F1aXQnLCAxOSwgMC4zKTtcblxuICAgIC8vIEJ1bGxldHNcbiAgICB0aGlzLmJ1bGxldHMgPSA1MDA7XG4gICAgdGhpcy5idWxsZXRzTGVmdFRleHQgPSB0aGlzLmFkZC5iaXRtYXBUZXh0KDAsIDIwLCAnbWluZWNyYWZ0aWEnLCB0aGlzLmJ1bGxldHMudG9TdHJpbmcoKSApO1xuICAgIC8vdGhpcy5idWxsZXRzTGVmdFRleHQuYWxpZ24gPSAnY2VudGVyJztcbiAgICB0aGlzLmJ1bGxldHNMZWZ0VGV4dC54ID0gdGhpcy5nYW1lLndpZHRoIC0gdGhpcy5idWxsZXRzTGVmdFRleHQudGV4dFdpZHRoIC0gMjA7XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG5cbiAgICBpZiAodGhpcy5maXJlQnV0dG9uLmlzRG93biB8fCB0aGlzLmdhbWUuaW5wdXQuYWN0aXZlUG9pbnRlci5pc0Rvd24gKVxuICAgICAge1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdGSVJFIScpO1xuXG4gICAgICAgIC8vIE1vdmluZz9cblx0ICAgICAgdGhpcy5jcm9zc2hhaXIueCA9IHRoaXMuZ2FtZS5pbnB1dC5tb3VzZVBvaW50ZXIueDtcblx0ICAgICAgdGhpcy5jcm9zc2hhaXIueSA9IHRoaXMuZ2FtZS5pbnB1dC5tb3VzZVBvaW50ZXIueTtcblxuXHQgICAgICBcblxuXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3RoaXMuZ2FtZS50aW1lLm5vdyAnICsgdGhpcy5nYW1lLnRpbWUubm93KTtcbiAgICAgICAgLy9jb25zb2xlLmxvZygndGhpcy5uZXh0RmlyZSAnICsgdGhpcy5uZXh0RmlyZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuZ2FtZS50aW1lLm5vdyA+IHRoaXMubmV4dEZpcmUgKVxuICAgICAgICB7XG4gICAgICAgICAgdGhpcy5uZXh0RmlyZSA9IHRoaXMuZ2FtZS50aW1lLm5vdyArIHRoaXMuZmlyZVJhdGU7XG4gICAgICAgICAgdGhpcy5meC5wbGF5KCdzaG90Jyk7XG4gICAgICAgICAgdGhpcy5idWxsZXRzIC09IDE7XG5cbiAgICAgICAgICBpZih0aGlzLmJ1bGxldHMgPD0gMCkge1xuICAgICAgICAgICAgdGhpcy5idWxsZXRzTGVmdFRleHQuc2V0VGV4dCgwKTtcbiAgICAgICAgICAgIHRoaXMuZW5kR2FtZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJ1bGxldHNMZWZ0VGV4dC5zZXRUZXh0KHRoaXMuYnVsbGV0cy50b1N0cmluZygpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5lbmVteXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC8vdmFyIGVuZW15ID0gdGhpcy5lbmVteXMuZ2V0QXQoaSk7XG4gICAgICAgICAgICB2YXIgZW5lbXkgPSB0aGlzLmVuZW15c1tpXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrT3ZlcmxhcCh0aGlzLmNyb3NzaGFpciwgZW5lbXkpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBlbmVteS5raWxsKCk7XG4gICAgICAgICAgICAgIHRoaXMuc2NvcmUrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgXG5cbiAgICAgIC8vIFNjYWxlIGVuZW15XG4gICAgICBmb3IgKHZhciBqID0gdGhpcy5lbmVteXMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIFxuICAgICAge1xuICAgICAgICB2YXIgdGVuZW15ID0gdGhpcy5lbmVteXNbal07XG4gICAgICAgIHRlbmVteS55ICs9IDAuMDU7XG4gICAgICAgIHRlbmVteS54IC09IDAuMDE7XG4gICAgICAgIHRlbmVteS5zY2FsZS54ICs9IDAuMDAxO1xuICAgICAgICB0ZW5lbXkuc2NhbGUueSArPSAwLjAwMTtcbiAgICAgIH1cblxuICAgICAgLy9cbiAgICAgIC8vdGhpcy5jcm9zc2hhaXIuc2NhbGUueCArPSAwLjE7XG4gICAgICAvL3RoaXMuY3Jvc3NoYWlyLnNjYWxlLnkgKz0gMC4xO1xuICB9LFxuXG4gIGNvbGxpc2lvbkhhbmRsZXI6IGZ1bmN0aW9uIChvYmoxLCBvYmoyKSB7XG4gICAgLy90aGlzLmdhbWUuc3RhZ2UuYmFja2dyb3VuZENvbG9yID0gJyNGRjY2MDAnO1xuICAgIC8vY29uc29sZS5sb2coJ2NvbGxpc2lvbiEnICsgb2JqMiArIG9iajEpO1xuXG4gIH0sXG5cbiAgZW5kR2FtZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuYnVsbGV0c0xlZnRUZXh0LnNldFRleHQoJzAnKTtcbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ0dhbWVPdmVyJyk7XG4gIH0sXG5cbiAgY2hlY2tPdmVybGFwOiBmdW5jdGlvbiAoc3ByaXRlQSwgc3ByaXRlQikge1xuICAgIHZhciBib3VuZHNBID0gc3ByaXRlQS5nZXRCb3VuZHMoKTtcbiAgICB2YXIgYm91bmRzQiA9IHNwcml0ZUIuZ2V0Qm91bmRzKCk7XG5cbiAgICAvL2NvbnNvbGUubG9nKGJvdW5kc0EpO1xuICAgIC8vY29uc29sZS5sb2coYm91bmRzQik7XG4gICAgLy9ib3VuZHNBLndpZHRoID0gMjA7XG4gICAgLy9ib3VuZHNBLmhlaWdodCA9IDIwO1xuXG4gICAgcmV0dXJuIFBoYXNlci5SZWN0YW5nbGUuaW50ZXJzZWN0cyhib3VuZHNBLCBib3VuZHNCKTtcbiAgfSxcblxuICBjcmVhdGVFbmVteTogZnVuY3Rpb24gKCkge1xuICAgIHZhciB4ID0gdGhpcy5nYW1lLndpZHRoIC0gMTAwXG4gICAgICAsIHkgPSB0aGlzLmdhbWUuaGVpZ2h0IC8gMjtcblxuICAgIHRoaXMuZW5lbXlDcmVhdGVkICs9IDE7XG5cbiAgICB2YXIgcmFuZG9tID0gdGhpcy5nYW1lLnJuZC5yZWFsSW5SYW5nZSgwLHgpO1xuICAgIGZvciAodmFyIGogPSB0aGlzLmVuZW15cy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkgXG4gICAge1xuICAgICAgdmFyIHRlbmVteSA9IHRoaXMuZW5lbXlzW2pdO1xuICAgICAgaWYocmFuZG9tID4gdGVuZW15LnggJiYgcmFuZG9tIDwgKHRlbmVteS54ICsgMTAwKSkge1xuICAgICAgICByYW5kb20gPSB0aGlzLmdhbWUucm5kLnJlYWxJblJhbmdlKDAseCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGVuZW15ID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUocmFuZG9tLCB5LCAnZW5lbXknKTtcbiAgICBcbiAgICAvL2VuZW15LnNjYWxlLnNldFRvKDUsNSk7XG4gICAgLy9jb25zb2xlLmxvZyhcImVuZW15IHdpZHRoOiBcIiArIGVuZW15LndpZHRoKTtcbiAgICAvL2NvbnNvbGUubG9nKFwid2luZG93IHdpZHRoOiBcIiArIHRoaXMuZ2FtZS53aWR0aCk7XG5cbiAgICAvKmlmKGVuZW15LnggPj0gdGhpcy5nYW1lLnggLSBlbmVteS53aWR0aCkge1xuXG4gICAgfSovXG5cbiAgICBlbmVteS5lbmFibGVCb2R5ID0gdHJ1ZTtcbiAgICBlbmVteS5waHlzaWNzQm9keVR5cGUgPSBQaGFzZXIuUGh5c2ljcy5BUkNBREU7XG4gICAgXG4gICAgLy90aGlzLmVuZW15cy5jcmVhdGUoZW5lbXkpO1xuICAgIHRoaXMuZW5lbXlzLnB1c2goZW5lbXkpO1xuXG4gICAgdGhpcy5nYW1lLndvcmxkLmJyaW5nVG9Ub3AodGhpcy5jcm9zc2hhaXIpO1xuICB9LFxuXG4gIHBsYXllcklucHV0RG93bjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy9jb25zb2xlLmxvZyhldmVudCk7XG4gICAgZXZlbnQua2lsbCgpO1xuXG4gIH0sXG5cbiAgb25JbnB1dERvd246IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ01lbnUnKTtcbiAgfVxufTtcbiIsInZhciBHYW1lb3ZlciA9IGZ1bmN0aW9uICgpIHt9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWVvdmVyO1xuXG5HYW1lb3Zlci5wcm90b3R5cGUgPSB7XG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHggPSB0aGlzLmdhbWUud2lkdGggLyAyXG4gICAgICAsIHkgPSB0aGlzLmdhbWUuaGVpZ2h0IC8gMjtcblxuICAgIHRoaXMudGl0bGVUeHQgPSB0aGlzLmFkZC5iaXRtYXBUZXh0KHgsIHksICdtaW5lY3JhZnRpYScsICdLaWxsZWQ6ICcgKTtcbiAgICB0aGlzLnRpdGxlVHh0LmFsaWduID0gJ2NlbnRlcic7XG4gICAgdGhpcy50aXRsZVR4dC54ID0gdGhpcy5nYW1lLndpZHRoIC8gMiAtIHRoaXMudGl0bGVUeHQudGV4dFdpZHRoIC8gMjtcblxuICAgIHkgPSB5ICsgdGhpcy50aXRsZVR4dC5oZWlnaHQgKyA1O1xuICAgIHRoaXMuc3RhcnRUeHQgPSB0aGlzLmFkZC5iaXRtYXBUZXh0KHgsIHksICdtaW5lY3JhZnRpYScsICdHQU1FIE9WRVInKTtcbiAgICB0aGlzLnN0YXJ0VHh0LmFsaWduID0gJ2NlbnRlcic7XG4gICAgdGhpcy5zdGFydFR4dC54ID0gdGhpcy5nYW1lLndpZHRoIC8gMiAtIHRoaXMuc3RhcnRUeHQudGV4dFdpZHRoIC8gMjtcbiAgICBcbiAgICB0aGlzLmlucHV0Lm9uRG93bi5hZGQodGhpcy5vbkRvd24sIHRoaXMpO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuXG4gIH0sXG5cbiAgb25Eb3duOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdNZW51Jyk7XG4gICAgLy90aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ0dhbWVvdmVyJyk7XG4gIH1cbn07XG4iLCJ2YXIgTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy50ZXh0ID0gbnVsbDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gTWVudTtcblxuTWVudS5wcm90b3R5cGUgPSB7XG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHggPSB0aGlzLmdhbWUud2lkdGggLyAyXG4gICAgICAsIHkgPSB0aGlzLmdhbWUuaGVpZ2h0IC8gMjtcblxuICAgIHRoaXMudGl0bGVUeHQgPSB0aGlzLmFkZC5iaXRtYXBUZXh0KHgsIHksICdtaW5lY3JhZnRpYScsICdOYWFwdXJpbmthdWh1JyApO1xuICAgIHRoaXMudGl0bGVUeHQuYWxpZ24gPSAnY2VudGVyJztcbiAgICB0aGlzLnRpdGxlVHh0LnggPSB0aGlzLmdhbWUud2lkdGggLyAyIC0gdGhpcy50aXRsZVR4dC50ZXh0V2lkdGggLyAyO1xuXG4gICAgdGhpcy5zdGFydFR4dCA9IHRoaXMuYWRkLmJpdG1hcFRleHQoeCwgeSArIHRoaXMudGl0bGVUeHQuaGVpZ2h0ICsgNSwgJ21pbmVjcmFmdGlhJywgJ1ByZXNzIHNjcmVlbiB0byBzdGFydCcpO1xuICAgIHRoaXMuc3RhcnRUeHQuYWxpZ24gPSAnY2VudGVyJztcbiAgICB0aGlzLnN0YXJ0VHh0LnggPSB0aGlzLmdhbWUud2lkdGggLyAyIC0gdGhpcy5zdGFydFR4dC50ZXh0V2lkdGggLyAyO1xuXG4gICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25Eb3duLCB0aGlzKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIG9uRG93bjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnR2FtZScpO1xuICAgIC8vdGhpcy5nYW1lLnNjYWxlLnN0YXJ0RnVsbFNjcmVlbigpO1xuICB9XG59O1xuIiwidmFyIFByZWxvYWRlciA9IGZ1bmN0aW9uIChnYW1lKSB7XG4gIHRoaXMuYXNzZXQgPSBudWxsO1xuICB0aGlzLnJlYWR5ID0gZmFsc2U7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByZWxvYWRlcjtcblxuUHJlbG9hZGVyLnByb3RvdHlwZSA9IHtcblxuICBwcmVsb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NldCA9IHRoaXMuYWRkLnNwcml0ZSgzMjAsIDI0MCwgJ3ByZWxvYWRlcicpO1xuICAgICAgdGhpcy5hc3NldC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuXG4gICAgICB0aGlzLmxvYWQub25Mb2FkQ29tcGxldGUuYWRkT25jZSh0aGlzLm9uTG9hZENvbXBsZXRlLCB0aGlzKTtcbiAgICAgIHRoaXMubG9hZC5zZXRQcmVsb2FkU3ByaXRlKHRoaXMuYXNzZXQpO1xuICAgICAgdGhpcy5sb2FkLmltYWdlKCd0YXJnZXQnLCAnYXNzZXRzL3RhcmdldC5wbmcnKTtcbiAgICAgIHRoaXMubG9hZC5pbWFnZSgncGxheWVyJywgJ2Fzc2V0cy9wbGF5ZXIucG5nJyk7XG4gICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2J1bm55JywgJ2Fzc2V0cy9idW5ueS5wbmcnKTtcbiAgICAgIHRoaXMubG9hZC5pbWFnZSgnZW5lbXknLCAnYXNzZXRzL2VuZW15LnBuZycpO1xuICAgICAgdGhpcy5sb2FkLmltYWdlKCdrb25la2l2YWFyaScsICdhc3NldHMvdHlra2kucG5nJyk7XG4gICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3NreScsICdhc3NldHMvc2t5LmpwZycpO1xuICAgICAgdGhpcy5sb2FkLmltYWdlKCdncm91bmQnLCAnYXNzZXRzL2dyb3VuZC5qcGcnKTtcbiAgICAgIHRoaXMubG9hZC5pbWFnZSgnY3Jvc3NoYWlyJywgJ2Fzc2V0cy90YXJnZXQucG5nJyk7XG4gICAgICB0aGlzLmxvYWQuYml0bWFwRm9udCgnbWluZWNyYWZ0aWEnLCAnYXNzZXRzL21pbmVjcmFmdGlhLnBuZycsICdhc3NldHMvbWluZWNyYWZ0aWEueG1sJyk7XG4gICAgICB0aGlzLmxvYWQuYXVkaW8oJ3NmeCcsICdhc3NldHMvYXVkaW8vU291bmRFZmZlY3RzL2Z4X21peGRvd24ub2dnJyk7XG4gIH0sXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NldC5jcm9wRW5hYmxlZCA9IGZhbHNlO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIGlmICghIXRoaXMucmVhZHkpIHtcbiAgICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdNZW51Jyk7XG4gICAgICB9XG4gIH0sXG5cbiAgb25Mb2FkQ29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlYWR5ID0gdHJ1ZTtcbiAgfVxufTtcbiIsInZhciBVdGlscyA9IHtcbiAgICBjb250YWluc09iamVjdDogZnVuY3Rpb24ob2JqLCBsaXN0KSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGxpc3RbaV0gPT09IG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVXRpbHM7Il19
